<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Alessandro Baffa">
    <meta name="description" content="Computer science is no more about computers than astronomy is about telescopes">
    <meta name="generator" content="Hugo 0.35-DEV" />

    
    <title>Be careful with slice &middot; @alebaffa’s Welcome</title>

    <link rel="stylesheet" href="https://alebaffa.com/css/weblog.css" media="screen" charset="utf-8" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/1.2.14/css/lightgallery.min.css" type="text/css" />
    


    
	<link href="https://alebaffa.com/index.xml" rel="alternate" type="application/rss+xml" title="Welcome" />
	
  </head>
  <body class="site">

<header>
  <nav>
    <h1><a href="/">@alebaffa</a>’s Welcome.</h1>
    <div class="menu">
      
      <ul>
        
            <li>
              <a href="/posts/">Posts</a>
              
                <a href="/posts/index.xml"><img src="/img/rss.svg" class="rss-icon" /></a>
              
            </li>
        
            <li>
              <a href="/projects/">Projects</a>
              
            </li>
        
            <li>
              <a href="/microposts/">Microposts</a>
              
                <a href="/microposts/index.xml"><img src="/img/rss.svg" class="rss-icon" /></a>
              
            </li>
        
        <li><a href="/about">About</a></li>
      </ul>
    </div>
  </nav>
</header>


  <main class="content">
    <article class="page">
      <p>
        <p><a href="https://blog.golang.org/slices">Slices</a> are a great tool in Go, but sometimes they can be confused with arrays.
A small reminder: slices are a pointer into an underline array. Let&rsquo;s take this example:</p>

<pre><code class="language-go">array := []int{1, 2, 3, 4, 5, 6}
slice := array[1:3]

// let's print both
fmt.Println(&quot;array: &quot;, array)
fmt.Println(&quot;slice: &quot;, slice)

// array:  [1 2 3 4 5 6]
// slice: [2 3]
</code></pre>

<p>Since the slice is only a pointer to the underline array, if you do some operations with the elements of the array you are also changing the elements of the slice. Like this example:</p>

<pre><code class="language-go">// let's double the first element of the array
array[1] *= 2

// let's print the array and the slice
fmt.Println(&quot;array: &quot;, array)
fmt.Println(&quot;slice: &quot;, slice)

// array:  [1 4 3 4 5 6]
// slice: [4 3]
</code></pre>

<p>A slice have two important properties:</p>

<pre><code class="language-go">fmt.Println(&quot;length of the slice: &quot;, len(slice))
fmt.Println(&quot;capacity of the slice: &quot;, cap(slice))

// length of the slice: :  2
// capacity of the slice: 5
</code></pre>

<p>The length is the number of elements that the slice contains, while the capacity is the max number of elements it can contain.</p>

<p>It&rsquo;s important to take care of what happens when the slice fulfills its capacity. Let&rsquo;s continue the example by adding new things in the slice (and so in the array):</p>

<pre><code class="language-go">middle = append(slice, 100)
middle = append(slice, 101)
middle = append(slice, 102)
middle = append(slice, 103)

// slice:  [4 3 99 100 101 102 103]
// array:  [1 4 3 99 100 101]
// capacity of slice:  10
</code></pre>

<p>The array has reached its length (6 elements), but the slice has been extended. It is actually been copied and moved and it became a new slice with double capacity (10. It was 5 before).</p>

<p>At this point the slice is not pointing anymore to that array. So, now if you do some operations to the underline array, the elements of the slice won&rsquo;t change anymore. Example:</p>

<pre><code class="language-go">// let's double the first element of the array
array[1] *= 2

// let's print the array and the slice now:
fmt.Println(&quot;array: &quot;, array)
fmt.Println(&quot;slice: &quot;, slice)

//array:  [1 8 3 99 100 101]
//slice:  [4 3 99 100 101 102 103]
</code></pre>

<p>As you can see, the <em>array[1] = 8</em>, but the corresponding element in the slice is still 4.</p>

<p>This is an important thing to take care of when you&rsquo;re using slices. It can be really confusing. Always take care of the capacity in case your program is managing a lot of elements.</p>

      </p>
    </article>
  </main>

<footer>
  <div class="footer_text">
      <div>
        <h3>Hi, <a href="/about">I'm Alessandro</a></h3>
        <p>
          Here you can place a short bio about yourself. Place a `bio.html` file in your
project directory under `layout/partials`. That will override this message.

        </p>
      </div>
      
      <div>
          <h3><a href="https://www.flickr.com/photos/alebaffa/">Photo Stream</a></h3>
          <div id="photos"></div>
        </div>
      </div>
      
  </div>

  
    <div class="footer_copyright">
      &copy; 2018 <a href="/about">Alessandro Baffa</a>
       - Made in Tokyo, Japan
    </div>
  
</footer>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/2.2.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/1.2.14/js/lightgallery-all.min.js" charset="utf-8"></script>
    <script src="/js/weblog.js" charset="utf-8"></script>
    

    <script type="text/javascript">

  
  $(function() {
    
    $.getJSON("https://api.flickr.com/services/feeds/photos_public.gne?id=alebaffa&format=json&jsoncallback=?", function(data) {
      iweblog.application.displayImages(data, 8);
    });
  });

</script>

    
  </body>
</html>

