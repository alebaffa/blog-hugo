<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Alessandro Baffa">
    <meta name="description" content="Computer science is no more about computers than astronomy is about telescopes">
    <meta name="generator" content="Hugo 0.35-DEV" />

    
    <title>Transformation Priority Premise: overcome the fear of new tests &middot; @alebaffa’s Welcome</title>

    <link rel="stylesheet" href="https://alebaffa.com/css/weblog.css" media="screen" charset="utf-8" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/1.2.14/css/lightgallery.min.css" type="text/css" />
    


    
	<link href="https://alebaffa.com/index.xml" rel="alternate" type="application/rss+xml" title="Welcome" />
	
  </head>
  <body class="site">

<header>
  <nav>
    <h1><a href="/">@alebaffa</a>’s Welcome.</h1>
    <div class="menu">
      
      <ul>
        
            <li>
              <a href="/posts/">Posts</a>
              
                <a href="/posts/index.xml"><img src="/img/rss.svg" class="rss-icon" /></a>
              
            </li>
        
            <li>
              <a href="/projects/">Projects</a>
              
            </li>
        
            <li>
              <a href="/microposts/">Microposts</a>
              
                <a href="/microposts/index.xml"><img src="/img/rss.svg" class="rss-icon" /></a>
              
            </li>
        
        <li><a href="/about">About</a></li>
      </ul>
    </div>
  </nav>
</header>


  <main class="content">
    <article class="page">
      <p>
        

<p><a href="https://blog.8thlight.com/uncle-bob/2013/05/27/TheTransformationPriorityPremise.html">The Transformation Priority Premise</a> (TPP) is a great empirical list of transformations that you can apply in your code when you’re working in TDD:</p>

<p><img src="../../../../img/tpp.png"/></p>

<h2 id="when-do-you-need-it">When do you need it?</h2>

<p>Practicing with TDD I realized that sometimes I reach a point when I get stuck: I am almost scared to add a new particular test because I already know it’s going to force me to completely rewrite the structure of the code.
The problem is that the more particular tests you add, the more generic your code has to become to handle all of them.</p>

<p>TPP comes in handy at this point. When you feel you’re stuck, take a look at your code and start from the top of this list to see if there are some transformations that you can apply.</p>

<p>Apply them even if you don’t see clearly how they will unblock you: the code itself will light up the path to follow.</p>

<h2 id="an-example-the-roman-numeral-kata">An example: the Roman Numeral Kata</h2>

<p>Inspired by the solution published by Codurance, I tried to practice with TPP using the same kata in Java. I made it several times and every time taking a look to the TPP list in order to see how I could use it.</p>

<p>In few occasions I got stuck with the algorithm and just by applying one of the items in the list, the code itself suggested me how to proceed.
Let’s see few examples.</p>

<p>At this point the code was handling only the case for 1, 2 and 3.
<script src="//gist.github.com/6944a3e84f7672505e11f3aa43dcd040/.js"></script></p>

<p>Now I wanted to add the new test to handle 4. So, in TDD you start by doing the easiest thing, so I added a new element “IV” in the array. Tests pass.
At this point you clearly see the duplication of the string “I” and so I said “_OK, time to refactor_”. Well, how?</p>

<p>So, I took the TPP list and the transformation 8) is (array -&gt; container). So, I transformed the array to a collection that could be used as a dictionary:
<script src="//gist.github.com/440d85e947fef253405fe45a6b144992/.js"></script></p>

<p>Now let’s keep only “I” and “IV” from the collection and let’s see if there’s another transformation I can use.
Uhm, my method has only a return, so the transformation 9) (statement -&gt; recursion) looks promising. I have now a collection that may have some useful methods I can take advantage from…let’s try:
<script src="//gist.github.com/a692a3e1608c69c9a52db39db988a7b5/.js"></script></p>

<p>Nice. Having a collection helped me to find an option that I wasn’t considering before.</p>

<h2 id="another-example">Another example</h2>

<p>At some point I had a lot of if statements:
<script src="//gist.github.com/6fd459d1f2049fa70fc0f7db9b8fc717/.js"></script></p>

<p>The TPP(10) says (if -&gt; while). So, I changed the code accordingly:
<script src="//gist.github.com/ecb93847173129f279ff5de6ca8677dd/.js"></script></p>

<p>At this point the repetition is really visible. A lot of while statements doing the same things with a decreasing value in the condition. It looks like something that begs to be refactored again using recursion, and so here it is:
<script src="//gist.github.com/a9111713ec0e3b6f6647e5ab6af6d4f1/.js"></script></p>

<h2 id="conclusion">Conclusion</h2>

<p>The Transformation Priority Premise is really helpful. It’s a handy list of changes that you can apply easily and with no damage every time you are stuck or you don’t know how to make your code more generic.</p>

<h1 id="title">Title</h1>

<p>I am going to do again some code kata I already done using this technique.</p>

<p>If you’re curious, you can see all the steps I’ve done in my implementation on <a href="https://github.com/alebaffa/codekata/commits/master/src">Github</a>.</p>

      </p>
    </article>
  </main>

<footer>
  <div class="footer_text">
      <div>
        <h3>Hi, <a href="/about">I'm Alessandro</a></h3>
        <p>
          Here you can place a short bio about yourself. Place a `bio.html` file in your
project directory under `layout/partials`. That will override this message.

        </p>
      </div>
      
      <div>
          <h3><a href="https://www.flickr.com/photos/alebaffa/">Photo Stream</a></h3>
          <div id="photos"></div>
        </div>
      </div>
      
  </div>

  
    <div class="footer_copyright">
      &copy; 2018 <a href="/about">Alessandro Baffa</a>
       - Made in Tokyo, Japan
    </div>
  
</footer>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/2.2.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/1.2.14/js/lightgallery-all.min.js" charset="utf-8"></script>
    <script src="/js/weblog.js" charset="utf-8"></script>
    

    <script type="text/javascript">

  
  $(function() {
    
    $.getJSON("https://api.flickr.com/services/feeds/photos_public.gne?id=alebaffa&format=json&jsoncallback=?", function(data) {
      iweblog.application.displayImages(data, 8);
    });
  });

</script>

    
  </body>
</html>

